generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

model User {
  id         Int        @id @default(autoincrement())
  name       String
  email      String     @unique
  password   String
  role       String     @default("corretor")
  active     Boolean    @default(false)
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
  equipe     String?
  properties Property[]

  @@map("users")
}

model Property {
  id                Int      @id @default(autoincrement())
  title             String
  shortDescription  String?
  fullDescription   String?
  propertyType      String
  transactionType   String
  price             Decimal  @db.Decimal(12, 2)
  bedrooms          Int      @default(0)
  bathrooms         Int      @default(0)
  suites            Int      @default(0)
  parkingSpaces     Int      @default(0)
  area              Decimal? @db.Decimal(10, 2)
  amenities         String[]
  bannerImage       String?
  galleryImages     String[]
  floorPlans        String[]
  apartmentVariants Json?
  address           String?
  googleMapsIframe  String?
  featured          Boolean  @default(false)
  visible           Boolean  @default(false)
  status            String   @default("draft")
  authorId          Int
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  isLancamento      Boolean  @default(false)
  islancamento      Boolean? @default(false)
  leads             Lead[]
  author            User     @relation(fields: [authorId], references: [id])

  @@map("properties")
}

model Lead {
  id         Int       @id @default(autoincrement())
  name       String
  phone      String
  email      String?
  message    String?
  propertyId Int?
  status     String    @default("new")
  createdAt  DateTime  @default(now())
  property   Property? @relation(fields: [propertyId], references: [id])

  @@map("leads")
}
